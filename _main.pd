#N canvas 263 12 2560 1316 12;
#X obj 781 41 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 837 217 5 0 0 0 - - -;
#X obj 1577 120 hradio 15 1 0 12 empty empty empty 0 -8 0 10 -262144
-1 -1 3;
#X text 1577 101 C;
#X text 1591 101 C#;
#X text 1609 101 D;
#X text 1621 101 D#;
#X text 1639 101 E;
#X text 1654 101 F;
#X text 1666 101 F#;
#X text 1684 101 G;
#X text 1696 101 G#;
#X text 1713 101 A;
#X text 1726 101 A#;
#X text 1745 101 B;
#X floatatom 1577 357 5 0 0 0 - - -;
#X obj 1577 324 expr 12 * $f2 + $f1;
#X floatatom 1707 222 5 0 0 0 - - -;
#X obj 1707 160 loadbang;
#X obj 1707 253 + 2;
#X text 1644 67 KEY ROOT;
#X obj 334 861 f;
#X obj 387 861 f;
#X obj 439 861 f;
#X obj 490 861 f;
#X obj 541 861 f;
#X text 1431 356 root MIDI number >;
#X obj 1577 395 s root_midi_number;
#X obj 1680 295 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 405 790 + 3;
#X obj 457 790 + 5;
#X obj 508 790 + 6;
#X obj 559 790 + 7;
#X obj 590 861 f;
#X obj 642 861 f;
#X obj 608 790 + 10;
#X obj 660 790 + 12;
#X obj 199 787 sel 0 1 2 3 4 5 6;
#X obj 334 707 r root_midi_number;
#X obj 461 910 mtof;
#X obj 3684 2042 dac~, f 6;
#X obj 199 757 random 7;
#X obj 100 619 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 3867 1976 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 6350 1;
#X obj 3864 1921 loadbang;
#X obj 948 856 f;
#X obj 990 856 f;
#X obj 1042 856 f;
#X obj 948 702 r root_midi_number;
#X obj 969 972 osc~;
#X obj 1009 910 mtof;
#X obj 813 727 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 813 752 random 3;
#X obj 813 782 sel 0 1 2;
#X msg 1707 192 4;
#X obj 948 781 - 36;
#X obj 1008 781 - 29;
#X obj 1060 781 - 24;
#X obj 100 646 f;
#X obj 100 711 + 1;
#X obj 115 846 > 1;
#X obj 100 677 t f f;
#X obj 132 711 sel 0;
#X obj 115 876 sel 1;
#X msg 115 906 0;
#X obj 65 755 t f f;
#X obj 132 757 random 2;
#X text 472 639 LEAD;
#X text 916 645 BASS;
#X text 1751 223 < OCTAVE;
#X obj 3684 2004 *~ 0.5, f 9;
#N canvas 0 65 1512 917 swarmatron 0;
#X obj 300 582 phasor~;
#X obj 143 577 phasor~;
#X obj 450 582 phasor~;
#X obj 602 581 phasor~;
#X obj 752 581 phasor~;
#X obj 897 580 phasor~;
#X obj 1047 580 phasor~;
#X obj 1193 579 phasor~;
#X obj 300 823 vcf~ 4;
#X obj 316 770 loadbang;
#X msg 316 793 8000;
#X obj 489 247 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 489 340 -;
#X obj 489 226 loadbang;
#X obj 434 363 expr~ $v1*$f2 + $f3;
#X obj 300 511 expr~ $v1 * pow(2 \, $v2);
#X obj 450 511 expr~ $v1 * pow(2 \, $v2);
#X obj 602 510 expr~ $v1 * pow(2 \, $v2);
#X obj 752 510 expr~ $v1 * pow(2 \, $v2);
#X obj 897 509 expr~ $v1 * pow(2 \, $v2);
#X obj 1047 509 expr~ $v1 * pow(2 \, $v2);
#X obj 1193 508 expr~ $v1 * pow(2 \, $v2);
#X obj 433 166 clip~ 0 1;
#X obj 433 201 expr~ (exp($v1*$f2)-1)/(exp($f2)-1);
#X obj 640 146 loadbang;
#X msg 640 169 10;
#X obj 489 266 t b b;
#X obj 545 311 t f f;
#X msg 545 288 0.001;
#X msg 489 287 0.4;
#X text 672 171 non-linearity (>= 1);
#X text 349 202 exp mapping;
#X obj 433 126 sig~;
#X obj 433 44 inlet;
#X obj 142 43 inlet;
#X obj 300 883 outlet~;
#X text 187 44 < base frequency;
#X text 480 44 < detuning (0-1);
#X obj 299 719 *~ 0.15;
#X text 1069 159 taken from swarmatron class patch;
#X connect 0 0 38 0;
#X connect 1 0 38 0;
#X connect 2 0 38 0;
#X connect 3 0 38 0;
#X connect 4 0 38 0;
#X connect 5 0 38 0;
#X connect 6 0 38 0;
#X connect 7 0 38 0;
#X connect 8 0 35 0;
#X connect 9 0 10 0;
#X connect 10 0 8 1;
#X connect 11 0 26 0;
#X connect 12 0 14 1;
#X connect 13 0 11 0;
#X connect 14 0 15 1;
#X connect 14 0 16 1;
#X connect 14 0 17 1;
#X connect 14 0 18 1;
#X connect 14 0 19 1;
#X connect 14 0 20 1;
#X connect 14 0 21 1;
#X connect 15 0 16 0;
#X connect 15 0 0 0;
#X connect 16 0 17 0;
#X connect 16 0 2 0;
#X connect 17 0 18 0;
#X connect 17 0 3 0;
#X connect 18 0 19 0;
#X connect 18 0 4 0;
#X connect 19 0 20 0;
#X connect 19 0 5 0;
#X connect 20 0 21 0;
#X connect 20 0 6 0;
#X connect 21 0 7 0;
#X connect 22 0 23 0;
#X connect 23 0 14 0;
#X connect 24 0 25 0;
#X connect 25 0 23 1;
#X connect 26 0 29 0;
#X connect 26 1 28 0;
#X connect 27 0 12 1;
#X connect 27 1 14 2;
#X connect 28 0 27 0;
#X connect 29 0 12 0;
#X connect 32 0 22 0;
#X connect 33 0 32 0;
#X connect 34 0 1 0;
#X connect 34 0 15 0;
#X connect 38 0 8 0;
#X restore 1009 972 pd swarmatron;
#X obj 1100 910 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 1097 848 loadbang;
#X msg 1097 880 0;
#N canvas 0 65 1512 917 fm 0;
#X obj 268 664 *~;
#X obj 270 182 sig~;
#X obj 269 397 +~;
#X obj 269 446 osc~;
#X obj 327 363 *~;
#X obj 610 268 vline~;
#X obj 328 320 *~;
#X obj 933 267 vline~;
#X obj 392 232 *~ 1;
#X msg 933 244 0.3 100 \, 0.7 70 100 \, 0.8 545 170 \, 0.35 85 715
\, 0 200 800;
#X msg 610 245 4 0 \, 3.6 100 0 \, 3 70 100 \, 2.9 830 170;
#X obj 392 255 osc~;
#X text 216 183 carrier;
#X text 981 268 amplitude envelope;
#X text 431 232 modulation frequency;
#X text 355 364 deviation (sidebands);
#X text 655 268 modulation index (envelope);
#X obj 268 476 *~ 0.5;
#X obj 144 515 delwrite~ fm 500;
#X obj 39 567 delread~ fm 200;
#X obj 155 568 delread~ fm 400;
#X obj 268 724 outlet~;
#X obj 270 117 inlet;
#X obj 610 116 inlet;
#X text 659 115 < bang when note starts;
#X text 40 385 taken from Chuck's Assignment 1 \, which was in turn
taken from the FM synthesis class patch and modified to add delay,
f 25;
#X obj 39 598 *~ 0.3;
#X obj 155 604 *~ 0.15;
#X text 320 117 < frequency;
#X connect 0 0 21 0;
#X connect 1 0 2 0;
#X connect 1 0 6 0;
#X connect 1 0 8 0;
#X connect 2 0 3 0;
#X connect 3 0 17 0;
#X connect 4 0 2 1;
#X connect 5 0 6 1;
#X connect 6 0 4 0;
#X connect 7 0 0 1;
#X connect 8 0 11 0;
#X connect 9 0 7 0;
#X connect 10 0 5 0;
#X connect 11 0 4 1;
#X connect 17 0 0 0;
#X connect 17 0 18 0;
#X connect 19 0 26 0;
#X connect 20 0 27 0;
#X connect 22 0 1 0;
#X connect 23 0 10 0;
#X connect 23 0 9 0;
#X connect 26 0 0 0;
#X connect 27 0 0 0;
#X restore 461 975 pd fm;
#X obj 156 908 s new_lead_note;
#X obj 493 948 r new_lead_note;
#X text 605 750 blues scale;
#X text 1049 744 root & 5th;
#X obj 1808 937 r root_midi_number;
#X obj 1790 1025 mtof;
#X obj 1839 1532 hsl 128 15 0 0.5 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 2032 1;
#X obj 1836 1477 loadbang;
#X obj 1790 1060 tabosc4~ wavetable;
#N canvas 0 22 450 278 (subpatch) 0;
#X array wavetable 2051 float 1;
#A 0 -0.0714335 -0.0728621 -0.0742907 -0.0757193 -0.0771479 -0.0785765
-0.0800051 -0.0814337 -0.0828623 -0.0842909 0.671441 0.671441 0.671441
0.671441 0.671441 0.671441 0.671441 0.671441 0.671441 0.671441 0.671441
0.671441 0.671441 0.671441 0.671441 0.671441 0.671441 0.671441 0.671441
0.671441 0.671441 0.671441 0.671441 0.671441 0.671441 0.671441 0.671441
0.671441 0.671441 0.671441 0.671441 -0.528577 -0.285721 -0.285721 -0.285721
-0.285721 -0.285721 -0.285721 -0.285721 -0.285721 -0.285721 -0.285721
-0.170004 -0.168575 -0.167147 -0.165718 -0.164289 -0.162861 -0.161432
-0.160004 -0.158575 -0.157146 0.64144 0.640011 0.638583 0.637154 0.635726
0.634297 0.632868 0.63144 0.630011 0.614296 0.614296 0.614296 0.614296
0.614296 0.614296 0.614296 0.614296 0.614296 0.614296 0.614296 0.6104
0.606504 0.602608 0.598712 0.594815 0.590919 0.587023 0.583127 0.579231
0.575335 0.571438 0.57001 0.568581 0.567153 0.565724 0.564295 0.562867
0.561438 0.56001 0.558581 0.557152 0.555724 0.554295 0.552867 0.551438
0.550009 0.548581 0.547152 0.545723 0.544295 0.542866 0.541438 0.540009
0.53858 0.537152 0.535723 0.534295 0.532866 0.531437 0.530009 0.52858
0.526539 0.524499 0.522458 0.520417 0.518376 0.516335 0.514294 0.512253
0.510212 0.508172 0.506131 0.50409 0.502049 0.500008 0.497967 0.495926
0.493886 0.491845 0.489804 0.487763 0.485722 0.484294 0.482865 0.481436
0.480008 0.478579 0.47715 0.475722 0.474293 0.472865 0.471436 0.470075
0.468715 0.467354 0.465994 0.464633 0.463272 0.461912 0.460551 0.459191
0.45783 0.45647 0.455109 0.453749 0.452388 0.451027 0.449667 0.448306
0.446946 0.445585 0.444225 0.428578 0.427149 0.425721 0.424292 0.422864
0.421435 0.420006 0.418578 0.417149 0.415721 0.414292 0.412863 0.411435
0.410006 0.408578 0.407149 0.40572 0.404292 0.402863 0.401434 0.400006
0.400006 0.400006 0.400006 0.400006 0.400006 0.400006 0.400006 0.400006
0.400006 0.38572 0.384421 0.383122 0.381824 0.380525 0.379226 0.377927
0.376629 0.37533 0.374031 0.372733 0.371434 0.370005 0.368577 0.367148
0.365719 0.364291 0.362862 0.361434 0.360005 0.358576 0.357148 0.357148
0.357148 0.357148 0.357148 0.357148 0.357148 0.357148 0.357148 0.357148
0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.442855 0.442855 0.442855
0.442855 0.442855 0.442855 0.442855 0.442855 0.442855 0.442855 0.442855
0.571421 0.571421 0.571421 0.571421 0.571421 0.571421 0.571421 0.571421
0.571421 0.571421 0.614277 0.615705 0.617133 0.618562 0.61999 0.621419
0.622847 0.624276 0.625704 0.627133 0.699987 0.699987 0.699987 0.699987
0.699987 0.699987 0.699987 0.699987 0.699987 0.699987 0.714272 0.714272
0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272
0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272
0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272
0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272
0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 0.714272 -0.957083
-0.957083 -0.957083 -0.957083 -0.957083 -0.957083 -0.957083 -0.957083
-0.957083 -0.957083 -0.957083 -0.957083 -0.94137 -0.939941 -0.938513
-0.937084 -0.935656 -0.934227 -0.932799 -0.93137 -0.929942 -0.928513
-0.928513 -0.928513 -0.928513 -0.928513 -0.928513 -0.928513 -0.928513
-0.928513 -0.928513 -0.928513 -0.914228 -0.914228 -0.914228 -0.914228
-0.914228 -0.914228 -0.914228 -0.914228 -0.914228 -0.914228 -0.899943
-0.899943 -0.899943 -0.899943 -0.899943 -0.899943 -0.899943 -0.899943
-0.899943 -0.899943 -0.899943 -0.899943 -0.899943 -0.899943 -0.899943
-0.899943 -0.899943 -0.899943 -0.899943 -0.899943 -0.899943 -0.684238
-0.68281 -0.681381 -0.679953 -0.678524 -0.677096 -0.675667 -0.674239
-0.67281 -0.671382 -0.255686 -0.254257 -0.252829 -0.2514 -0.249971
-0.248543 -0.247114 -0.245686 -0.244257 -0.242829 -0.214259 -0.214259
-0.214259 -0.214259 -0.214259 -0.214259 -0.214259 -0.214259 -0.214259
-0.214259 -0.214259 -0.157118 -0.157118 -0.157118 -0.157118 -0.157118
-0.157118 -0.157118 -0.157118 -0.157118 -0.157118 -0.128548 -0.128548
-0.128548 -0.128548 -0.128548 -0.128548 -0.128548 -0.128548 -0.128548
-0.128548 -0.0842645 -0.082836 -0.0814075 -0.079979 -0.0785505 -0.077122
-0.0756935 -0.0742649 -0.0728364 -0.0714079 -0.346764 -0.350661 -0.354557
-0.358453 -0.362349 -0.366245 -0.370142 -0.374038 -0.377934 -0.38183
-0.385726 -0.388584 -0.391441 -0.394298 -0.397155 -0.400012 -0.40287
-0.405727 -0.408584 -0.411441 -0.414298 -0.415727 -0.417156 -0.418584
-0.420013 -0.421441 -0.42287 -0.424299 -0.425727 -0.427156 -0.428585
-0.430625 -0.432666 -0.434707 -0.436748 -0.438789 -0.44083 -0.442871
-0.444911 -0.446952 -0.448993 -0.451034 -0.453075 -0.455116 -0.457157
-0.459197 -0.461238 -0.463279 -0.46532 -0.467361 -0.469402 -0.471443
-0.4743 -0.477157 -0.480014 -0.482871 -0.485729 -0.488586 -0.491443
-0.4943 -0.497158 -0.500015 -0.502872 -0.505729 -0.508586 -0.511444
-0.514301 -0.517158 -0.520015 -0.522872 -0.52573 -0.528587 -0.530015
-0.531444 -0.532873 -0.534301 -0.53573 -0.537158 -0.538587 -0.540016
-0.541444 -0.557159 -0.558458 -0.559756 -0.561055 -0.562354 -0.563653
-0.564951 -0.56625 -0.567549 -0.568847 -0.570146 -0.571445 -0.571445
-0.571445 -0.571445 -0.571445 -0.571445 -0.571445 -0.571445 -0.571445
-0.571445 -0.571445 -0.572874 -0.574302 -0.575731 -0.577159 -0.578588
-0.580017 -0.581445 -0.582874 -0.584302 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731 -0.585731
-0.585731 -0.585731 -0.585731 -0.571445 -0.570016 -0.568588 -0.567159
-0.565731 -0.564302 -0.562873 -0.561445 -0.560016 -0.558587 -0.557159
-0.55573 -0.554302 -0.552873 -0.551444 -0.550016 -0.548587 -0.547159
-0.54573 -0.544301 -0.542873 -0.540016 -0.537158 -0.534301 -0.531444
-0.528587 -0.52573 -0.522872 -0.520015 -0.517158 -0.514301 -0.510405
-0.506508 -0.502612 -0.498716 -0.49482 -0.490924 -0.487027 -0.483131
-0.479235 -0.475339 -0.471443 -0.468585 -0.465728 -0.462871 -0.460014
-0.457157 -0.454299 -0.451442 -0.448585 -0.445728 -0.442871 -0.440013
-0.437156 -0.434299 -0.431442 -0.428585 -0.425727 -0.42287 -0.420013
-0.417156 -0.414298 -0.412258 -0.410217 -0.408176 -0.406135 -0.404094
-0.402053 -0.400012 -0.397972 -0.395931 -0.39389 -0.391849 -0.389808
-0.387767 -0.385726 -0.383686 -0.381645 -0.379604 -0.377563 -0.375522
-0.373481 -0.37144 -0.368583 -0.365726 -0.362869 -0.360012 -0.357154
-0.354297 -0.35144 -0.348583 -0.345725 -0.342869 -0.339643 -0.336417
-0.333191 -0.329965 -0.326739 -0.323513 -0.320287 -0.317061 -0.313836
-0.31061 -0.307384 -0.304158 -0.300932 -0.297706 -0.29448 -0.291254
-0.288028 -0.284803 -0.281577 -0.278351 -0.275125 -0.271899 -0.268673
-0.265447 -0.262221 -0.258995 -0.25577 -0.252544 -0.249318 -0.246092
-0.242866 -0.240723 -0.23858 -0.236437 -0.234294 -0.232151 -0.230009
-0.227866 -0.225723 -0.22358 -0.221437 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571 0.728571
0.742857 0.742857 0.742857 0.742857 0.742857 0.742857 0.742857 0.742857
0.742857 0.742857 0.757143 0.757143 0.757143 0.757143 0.757143 0.757143
0.757143 0.757143 0.757143 0.757143 0.771429 0.772728 0.774027 0.775325
0.776624 0.777923 0.779222 0.78052 0.781819 0.783118 0.784416 0.771429
0.785715 0.785715 0.785715 0.785715 0.785715 0.785715 0.785715 0.785715
0.785715 0.785715 0.107833 0.109677 0.11152 0.113363 0.115207 0.11705
0.118893 0.120737 0.12258 0.124424 0.126267 0.12811 0.129954 0.131797
0.13364 0.135484 0.137327 0.13917 0.141014 0.142857 0.144762 0.146667
0.148572 0.150476 0.152381 0.154286 0.156191 0.158096 0.16 0.161905
0.16381 0.165715 0.16762 0.169524 0.171429 0.173334 0.175239 0.177144
0.179048 0.180953 0.182858 0.184763 0.186668 0.188572 0.190477 0.192382
0.194287 0.196192 0.198096 0.200001 0.202599 0.205196 0.207794 0.210391
0.212989 0.215586 0.218184 0.220781 0.223378 0.225976 0.228573 0.230002
0.231431 0.232859 0.234288 0.235716 0.237145 0.238574 0.240002 0.241431
0.242859 0.245717 0.248574 0.251431 0.254288 0.257145 0.260003 0.26286
0.265717 0.268574 0.271432 0.272792 0.274153 0.275513 0.276874 0.278235
0.279595 0.280956 0.282316 0.283677 0.285037 0.286398 0.287758 0.289119
0.29048 0.29184 0.293201 0.294561 0.295922 0.297282 0.298643 0.300004
0.302861 0.305718 0.308575 0.311432 0.31429;
#A 1000 0.317147 0.320004 0.322861 0.325718 0.328576 0.330004 0.331433
0.332861 0.33429 0.335719 0.337147 0.338576 0.340005 0.341433 0.342862
0.34429 0.345719 0.347148 0.348576 0.350005 0.351433 0.352862 0.354291
0.355719 0.357148 0.358447 0.359745 0.361044 0.362343 0.363641 0.36494
0.366239 0.367538 0.368836 0.370135 0.38572 0.387148 0.388577 0.390006
0.391434 0.392863 0.394291 0.39572 0.397149 0.398577 0.400006 0.401434
0.402863 0.404292 0.40572 0.407149 0.408578 0.410006 0.411435 0.412863
0.414292 0.415721 0.417149 0.418578 0.420006 0.421435 0.422864 0.424292
0.425721 0.427149 0.442864 0.444163 0.445462 0.44676 0.448059 0.449358
0.450656 0.451955 0.453254 0.454553 0.455851 0.45715 0.458579 0.460007
0.461436 0.462864 0.464293 0.465722 0.46715 0.468579 0.470007 0.485722
0.485722 0.485722 0.485722 0.485722 0.485722 0.485722 0.485722 0.485722
0.485722 0.45715 0.455721 0.454293 0.452864 0.451436 0.450007 0.448578
0.44715 0.445721 0.444293 0.414292 0.412993 0.411694 0.410396 0.409097
0.407798 0.4065 0.405201 0.403902 0.402603 0.401305 0.38572 0.382863
0.380005 0.377148 0.374291 0.371434 0.368577 0.365719 0.362862 0.360005
0.357148 0.355719 0.354291 0.352862 0.351433 0.350005 0.348576 0.347148
0.345719 0.34429 0.342862 0.341501 0.34014 0.33878 0.337419 0.336059
0.334698 0.333338 0.331977 0.330616 0.329256 0.327895 0.326535 0.325174
0.323814 0.322453 0.321092 0.319732 0.318371 0.317011 0.31565 0.31429
0.312896 0.311502 0.310109 0.308715 0.307321 0.305927 0.304533 0.30314
0.301746 0.300352 0.298958 0.297565 0.296171 0.294777 0.293383 0.29199
0.290596 0.289202 0.287808 0.286415 0.285021 0.283627 0.282233 0.280839
0.279446 0.278052 0.276658 0.275264 0.273871 0.272477 0.271083 0.269689
0.268296 0.266902 0.265508 0.264114 0.262721 0.261327 0.259933 0.258539
0.257145 0.255003 0.25286 0.250717 0.248574 0.246431 0.244288 0.242145
0.240002 0.237859 0.235716 0.233573 0.231431 0.229288 0.227145 0.225002
0.222859 0.220716 0.218573 0.21643 0.214287 0.213135 0.211983 0.210831
0.209679 0.208527 0.207375 0.206223 0.20507 0.203918 0.202766 0.201614
0.200462 0.19931 0.198158 0.197006 0.195854 0.194702 0.193549 0.192397
0.191245 0.190093 0.188941 0.187789 0.186637 0.185485 0.184333 0.183181
0.182028 0.180876 0.179724 0.178572 0.17742 0.176268 0.175116 0.173964
0.172812 0.17166 0.170507 0.169355 0.168203 0.167051 0.165899 0.164747
0.163595 0.162443 0.161291 0.160139 0.158987 0.157834 0.156682 0.15553
0.154378 0.153226 0.152074 0.150922 0.14977 0.148618 0.147466 0.146313
0.145161 0.144009 0.142857 0.141429 0.14 0.138571 0.137143 0.135714
0.134286 0.132857 0.131428 0.13 0.128571 0.127142 0.125714 0.124285
0.122857 0.121428 0.119999 0.118571 0.117142 0.115714 0.114285 0.112856
0.111428 0.109999 0.108571 0.107142 0.105713 0.104285 0.102856 0.101428
0.0999991 -0.514304 -0.514304 -0.514304 -0.514304 -0.514304 -0.514304
-0.514304 -0.514304 -0.514304 -0.514304 -0.500018 -0.500018 -0.500018
-0.500018 -0.500018 -0.500018 -0.500018 -0.500018 -0.500018 -0.500018
-0.671451 -0.671451 -0.671451 -0.671451 -0.671451 -0.671451 -0.671451
-0.671451 -0.671451 -0.671451 -0.671451 -0.757167 -0.600021 -0.600021
-0.600021 -0.600021 -0.600021 -0.600021 -0.600021 -0.600021 -0.600021
-0.600021 -0.584306 -0.582877 -0.581449 -0.58002 -0.578592 -0.577163
-0.575734 -0.574306 -0.572877 -0.571449 0.414299 0.414299 0.414299
0.414299 0.414299 0.414299 0.414299 0.414299 0.414299 0.414299 0.428585
0.428585 0.428585 0.428585 0.428585 0.428585 0.428585 0.428585 0.428585
0.428585 0.442871 0.442871 0.442871 0.442871 0.442871 0.442871 0.442871
0.442871 0.442871 0.442871 0.442871 0.442871 0.442871 0.442871 0.442871
0.442871 0.442871 0.442871 0.442871 0.442871 0.442871 0.457157 0.457157
0.457157 0.457157 0.457157 0.457157 0.457157 0.457157 0.457157 0.457157
0.458586 0.460014 0.461443 0.462872 0.4643 0.465729 0.467157 0.468586
0.470015 0.471443 -0.600001 -0.600001 -0.600001 -0.600001 -0.600001
-0.600001 -0.600001 -0.600001 -0.600001 -0.600001 -0.600001 -0.585724
-0.585724 -0.585724 -0.585724 -0.585724 -0.585724 -0.585724 -0.585724
-0.585724 -0.585724 -0.542866 -0.542866 -0.542866 -0.542866 -0.542866
-0.542866 -0.542866 -0.542866 -0.542866 -0.542866 -0.109291 -0.111434
-0.113577 -0.11572 -0.117863 -0.120006 -0.122149 -0.124292 -0.126435
-0.128578 -0.130421 -0.132264 -0.134108 -0.135951 -0.137794 -0.139638
-0.141481 -0.143324 -0.145168 -0.147011 -0.148855 -0.150698 -0.152541
-0.154385 -0.156228 -0.158071 -0.159915 -0.161758 -0.163601 -0.165445
-0.167288 -0.169132 -0.170975 -0.172818 -0.174662 -0.176505 -0.178348
-0.180192 -0.182035 -0.183878 -0.185722 -0.187865 -0.190008 -0.192151
-0.194293 -0.196436 -0.198579 -0.200722 -0.202865 -0.205008 -0.207151
-0.209294 -0.211437 -0.21358 -0.215723 -0.217865 -0.220008 -0.222151
-0.224294 -0.226437 -0.22858 -0.22994 -0.231301 -0.232662 -0.234022
-0.235383 -0.236743 -0.238104 -0.239465 -0.240825 -0.242186 -0.243546
-0.244907 -0.246267 -0.247628 -0.248989 -0.250349 -0.25171 -0.25307
-0.254431 -0.255791 -0.257152 -0.258581 -0.260009 -0.261438 -0.262866
-0.264295 -0.265724 -0.267152 -0.268581 -0.270009 -0.271438 -0.272867
-0.274295 -0.275724 -0.277152 -0.278581 -0.28001 -0.281438 -0.282867
-0.284295 -0.285724 -0.287567 -0.289411 -0.291254 -0.293097 -0.294941
-0.296784 -0.298628 -0.300471 -0.302314 -0.304158 -0.306001 -0.307844
-0.309688 -0.311531 -0.313374 -0.315218 -0.317061 -0.318905 -0.320748
-0.322591 -0.324435 -0.326278 -0.328121 -0.329965 -0.331808 -0.333651
-0.335495 -0.337338 -0.339182 -0.341025 -0.342868 -0.344297 -0.345725
-0.347154 -0.348583 -0.350011 -0.35144 -0.352868 -0.354297 -0.355726
-0.357155 -0.358515 -0.359876 -0.361236 -0.362597 -0.363957 -0.365318
-0.366678 -0.368039 -0.3694 -0.37076 -0.372121 -0.373481 -0.374842
-0.376202 -0.377563 -0.378924 -0.380284 -0.381645 -0.383005 -0.384366
-0.385726 -0.387155 -0.388584 -0.390012 -0.391441 -0.392869 -0.394298
-0.395727 -0.397155 -0.398584 -0.400012 -0.401441 -0.40287 -0.404298
-0.405727 -0.407155 -0.408584 -0.410013 -0.411441 -0.41287 -0.428585
-0.429945 -0.431306 -0.432666 -0.434027 -0.435388 -0.436748 -0.438109
-0.439469 -0.44083 -0.44219 -0.443551 -0.444912 -0.446272 -0.447633
-0.448993 -0.450354 -0.451714 -0.453075 -0.454435 -0.455796 -0.457157
-0.458585 -0.460014 -0.461442 -0.462871 -0.4643 -0.465728 -0.467157
-0.468585 -0.470014 -0.471443 -0.472871 -0.4743 -0.475728 -0.477157
-0.478586 -0.480014 -0.481443 -0.482871 -0.4843 -0.485729 -0.485729
-0.485729 -0.485729 -0.485729 -0.485729 -0.485729 -0.485729 -0.485729
-0.485729 -0.485729 -0.500015 -0.498586 -0.497158 -0.495729 -0.4943
-0.492872 -0.491443 -0.490014 -0.488586 -0.487157 -0.414298 -0.410013
-0.405727 -0.401441 -0.397155 -0.392869 -0.388584 -0.384298 -0.380012
-0.375726 -0.30001 -0.297969 -0.295928 -0.293888 -0.291847 -0.289806
-0.287765 -0.285724 -0.283683 -0.281642 -0.279602 -0.277561 -0.27552
-0.273479 -0.271438 -0.269397 -0.267356 -0.265315 -0.263275 -0.261234
-0.259193 -0.257152 -0.252866 -0.24858 -0.244295 -0.240009 -0.235723
-0.231437 -0.227151 -0.222866 -0.21858 -0.214294 -0.210008 -0.205722
-0.201436 -0.197151 -0.192865 -0.188579 -0.184293 -0.180007 -0.175722
-0.171436 -0.168715 -0.165993 -0.163272 -0.160551 -0.15783 -0.155109
-0.152388 -0.149667 -0.146945 -0.144224 -0.141503 -0.138782 -0.136061
-0.13334 -0.130619 -0.127897 -0.125176 -0.122455 -0.119734 -0.117013
-0.114292 -0.112387 -0.110482 -0.108577 -0.106672 -0.104768 -0.102863
-0.100958 -0.0990532 -0.0971484 -0.0952436 -0.0933388 -0.091434 -0.0895292
-0.0876244 -0.0857196 -0.0838147 -0.0819099 -0.0800051 -0.0781003 -0.0761955
-0.0742907 -0.0723859 -0.0704811 -0.0685763 -0.0666715 -0.0647667 -0.0628619
-0.0609571 -0.0590522 -0.0571474 -0.0544263 -0.0517051 -0.048984 -0.0462628
-0.0435417 -0.0408205 -0.0380994 -0.0353782 -0.0326571 -0.0299359 -0.0272148
-0.0244936 -0.0217725 -0.0190513 -0.0163302 -0.013609 -0.0108879 -0.00816673
-0.00544558 -0.00272443 -3.30942e-006 0.00223764 0.00447859 0.00671953
0.00896048 0.0112014 0.0134424 0.0156833 0.0179243 0.0201652 0.0224062
0.0246471 0.0268881 0.029129 0.03137 0.0336109 0.0358519 0.0380928
0.0403338 0.0425747 0.0448157 0.0470566 0.0492975 0.0515385 0.0537794
0.0560204 0.0582613 0.0605023 0.0627432 0.0649842 0.0672251 0.0694661
0.071707 0.073948 0.0761889 0.0784299 0.0806708 0.0829118 0.0851527
0.0873937 0.0896346 0.0918756 0.0941165 0.0963575 0.0985984 0.100839
0.10308 0.105321 0.107562 0.109803 0.112044 0.114285 0.116326 0.118367
0.120408 0.122449 0.124489 0.12653 0.128571 0.130612 0.132653 0.134694
0.342862 0.342862 0.342862 0.342862 0.342862 0.342862 0.342862 0.342862
0.342862 0.342862 0.342862 0.342862 0.342862 0.342862 0.342862 0.342862
0.342862 0.342862 0.342862 0.342862 0.342862 0.31429 0.312862 0.311433
0.310004 0.308576 0.307147 0.305719 0.30429 0.302861 0.301433 0.185716
0.182859 0.180001 0.177144 0.174287 0.17143 0.168573 0.165715 0.162858
0.160001 0.0714276 0.0671418 0.062856 0.0585701 0.0542843 0.0499985
0.0457127 0.0414269 0.0371411 0.0328553 -2.61816e-006 -0.00519754 -0.0103925
-0.0155874 -0.0207823 -0.0259772 -0.0311722 -0.0363671 -0.041562 -0.0467569
-0.0519519 -0.128577 -0.131434 -0.134291 -0.137149 -0.140006 -0.142863
-0.14572 -0.148577 -0.151435 -0.154292 -0.185721 -0.192864 -0.200007
-0.20715 -0.214293 -0.221436 -0.228579 -0.235722 -0.242865 -0.250008
-0.285723 -0.291438 -0.297152 -0.302867 -0.308581 -0.314296 -0.32001
-0.325724 -0.331439 -0.337153 -0.685733 -0.685733 -0.685733 -0.685733
-0.685733 -0.685733 -0.685733 -0.685733 -0.685733 -0.685733 -0.685733
-0.685733 -0.685733 -0.685733 -0.685733 -0.685733 -0.685733 -0.685733
-0.685733 -0.685733 -0.685733 -0.685733;
#A 2000 -0.685733 -0.685733 -0.685733 -0.685733 -0.685733 -0.685733
-0.685733 -0.685733 -0.685733 -0.685733 -0.684304 -0.682875 -0.681447
-0.680018 -0.67859 -0.677161 -0.675732 -0.674304 -0.672875 -0.671446
-0.670766 -0.670086 -0.669405 -0.668725 -0.668045 -0.667365 -0.666684
-0.666004 -0.665324 -0.664643 -0.663963 -0.663283 -0.662603 -0.661922
-0.661242 -0.660562 -0.659882 -0.659201 -0.658521 -0.657841 -0.657161
-0.657161 -0.657161 -0.657161 -0.657161 -0.657161 -0.657161 -0.657161
-0.657161 -0.657161 -0.557158;
#X coords 0 1 2050 -1 200 140 1 0 0;
#X restore 1843 746 graph;
#X obj 1833 696 s wavetable;
#X obj 1999 696 s wavetable;
#X obj 1999 631 loadbang;
#X obj 1415 761 f;
#X obj 1463 747 + 1;
#X msg 1415 883 -24;
#X obj 1790 989 +;
#X msg 1720 883 -14;
#X msg 1453 883 -21;
#X msg 1491 883 -19;
#X msg 1529 883 -18;
#X msg 1567 883 -17;
#X msg 1605 883 -18;
#X msg 1643 883 -19;
#X msg 1681 883 -21;
#X obj 1463 774 % 8;
#X obj 1415 849 sel 0 1 2 3 4 5 6 7, f 44;
#X text 1449 818 fixed pattern -- walking up & down blues scale;
#X obj 1047 1481 loadbang;
#X obj 1050 1539 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 10160 1;
#X text 1194 1536 bass volume;
#X obj 507 1475 loadbang;
#X obj 510 1533 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 3175 1;
#X text 654 1531 lead volume;
#X text 1625 620 WAVETABLE SYNTH;
#X text 4010 1974 master volume;
#X text 1981 1530 wavetable volume;
#X msg 1833 663 write wavetable.txt;
#X msg 1999 663 read wavetable.txt;
#X obj 1815 1168 vline~;
#X obj 1790 1200 *~;
#X msg 1815 1140 1 5 \, 0.1 300 100 \, 0.7 550 150 \, 0.35 80 700 \,
0 50 800;
#X obj 3226 1138 soundfiler;
#X obj 3226 1052 loadbang;
#N canvas 0 22 450 278 (subpatch) 0;
#X array kick 42722 float 2;
#X coords 0 1 42722 -1 200 140 1 0 0;
#X restore 3218 883 graph;
#X obj 3610 1137 soundfiler;
#X obj 3610 1051 loadbang;
#N canvas 0 22 450 278 (subpatch) 0;
#X array snare 60637 float 2;
#X coords 0 1 60637 -1 200 140 1 0 0;
#X restore 3602 882 graph;
#X obj 4020 1129 soundfiler;
#X obj 4020 1043 loadbang;
#N canvas 0 22 450 278 (subpatch) 0;
#X array hihat 6546 float 2;
#X coords 0 1 6546 -1 200 140 1 0 0;
#X restore 4011 874 graph;
#X obj 4444 1128 soundfiler;
#X obj 4444 1042 loadbang;
#N canvas 0 22 450 278 (subpatch) 0;
#X array tom 22050 float 2;
#X coords 0 1 22050 -1 200 140 1 0 0;
#X restore 4436 873 graph;
#X obj 3104 1138 tabplay~ kick;
#X obj 3486 1136 tabplay~ snare;
#X obj 3904 1130 tabplay~ hihat;
#X obj 4343 1129 tabplay~ tom;
#X obj 3771 2098 vu 15 120 empty empty -1 -8 0 10 -66577 -1 1 0;
#X obj 3770 2045 vu_measure;
#X msg 3226 1090 read -resize kick.wav kick;
#X msg 3610 1089 read -resize snare.wav snare;
#X msg 4020 1081 read -resize hihat.wav hihat;
#X msg 4444 1080 read -resize tom.wav tom;
#X obj 3104 1104 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 3486 1102 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 3904 1095 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 4343 1095 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 3929 777 DRUMS;
#X obj 3131 1539 hsl 128 15 0 0.5 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 12700 1;
#X obj 3128 1484 loadbang;
#X msg 1047 1509 0.8;
#X obj 3514 1541 hsl 128 15 0 0.5 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 12700 1;
#X obj 3511 1486 loadbang;
#X obj 3933 1532 hsl 128 15 0 0.5 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 12700 1;
#X obj 3930 1477 loadbang;
#X obj 4370 1522 hsl 128 15 0 0.5 0 0 empty empty empty -2 -8 0 10
-262144 -1 -1 12700 1;
#X obj 4367 1467 loadbang;
#X text 3273 1537 kick volume;
#X text 3656 1539 snare volume;
#X text 4075 1530 hihat volume;
#X text 4512 1520 tom volume;
#X msg 3128 1512 1;
#X obj 1008 1572 *~ 0.8;
#X obj 3103 1567 *~ 1;
#X obj 4276 1706 hsl 128 15 0 3 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 12700 1;
#X obj 4273 1651 loadbang;
#X text 4418 1704 drums volume;
#X obj 2460 813 sel 0 1 2 3 4, f 30;
#X obj 2460 774 melody_maker;
#X obj 2372 733 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 2321 767 Get set of 8 notes;
#X msg 2460 851 0;
#X msg 2501 851 3;
#X msg 2542 851 5;
#X msg 2584 852 6;
#X msg 2625 851 7;
#X msg 2667 851 10;
#X obj 2685 947 r root_midi_number;
#X obj 2667 1035 mtof;
#X obj 2667 999 +;
#X obj 2667 1077 osc~;
#X obj 2759 1521 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 1905 1;
#X obj 2756 1466 loadbang;
#X text 2902 1518 arp volume;
#X text 2606 675 ARP;
#X obj 586 365 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 738 364 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 889 364 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1039 364 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 586 399 s half_note;
#X obj 586 327 measure_divider 2;
#X obj 738 326 measure_divider 4;
#X obj 889 326 measure_divider 8;
#X obj 1039 326 measure_divider 16;
#X obj 738 402 s quarter_note;
#X obj 889 402 s eighth_note;
#X obj 1039 401 s sixteenth_note;
#X msg 781 127 1;
#X obj 781 181 +;
#X obj 837 171 % 64;
#X obj 100 585 r sixteenth_note;
#X text 51 525 this mechanism causes each lead note to randomly last
either 1 or 2 sixteenth notes, f 30;
#X obj 156 609 r lead_note_sustain_index;
#X obj 15 965 s lead_note_sustain_index;
#X obj 115 936 s lead_note_sustain_index;
#X obj 813 693 r sixteenth_note;
#X obj 1415 716 r quarter_note;
#X obj 1815 1112 r quarter_note;
#X text 590 48 TEMPO SEQUENCING;
#X msg 1836 1505 0.08;
#X obj 1790 1560 *~ 0.08;
#X obj 1198 365 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1198 327 measure_divider 32;
#X obj 1198 402 s thirty_second_note;
#X obj 2460 728 r thirty_second_note;
#X obj 2667 1556 *~ 0.1;
#X obj 1069 261 s sixty_fourth_note_index;
#X obj 2668 1236 *~;
#X obj 2686 1137 r sixty_fourth_note_index;
#X obj 451 364 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 451 398 s whole_note;
#X obj 451 328 sel 0;
#X obj 2372 672 r whole_note;
#X floatatom 1365 814 5 0 0 0 - - -;
#X obj 781 9 loadbang;
#X obj 2686 1180 expr if ($f1 < 16 || $f1 >= 32 && $f1 < 48 \, 1 \,
0);
#X obj 1010 1312 cnv 15 100 60 empty empty empty 20 12 0 14 -233017
-66577 0;
#X obj 461 1562 *~ 0.25;
#X msg 507 1503 0.25;
#X msg 2756 1494 0.15;
#X obj 2727 1289 vline~;
#X obj 2727 1224 r thirty_second_note;
#X obj 2667 1324 *~;
#X msg 2727 1261 1 5 \, 0 100 5;
#X obj 840 50 r sixty_fourth_note_duration;
#X obj 781 61 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 3077 1043 r kick_play;
#X obj 3458 1047 r snare_play;
#X obj 1920 93 r score_incr;
#X obj 2030 93 r score_decr;
#X floatatom 1920 230 5 0 0 0 - - -;
#X msg 1920 123 1;
#X obj 1920 188 +;
#X msg 2030 123 -1;
#X obj 1954 189 f;
#X msg 1989 189 0;
#X obj 3898 1044 r hat_play;
#X obj 4279 1048 r tom_play;
#X obj 2181 109 r k_led1;
#X obj 2181 131 r k_led2;
#X obj 2181 153 r k_led3;
#X obj 2181 175 r k_led4;
#X obj 2254 109 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2254 131 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2254 153 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2254 176 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2351 109 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2351 131 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2351 153 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2351 176 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2278 109 r s_led1;
#X obj 2278 131 r s_led2;
#X obj 2278 153 r s_led3;
#X obj 2278 175 r s_led4;
#X obj 1183 166 delay 100;
#X obj 1183 199 rhythm;
#X obj 2448 109 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2448 131 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2448 153 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2448 176 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2545 109 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2545 131 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2545 153 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2545 176 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2373 109 r t_led1;
#X obj 2375 131 r t_led2;
#X obj 2375 153 r t_led3;
#X obj 2375 175 r t_led4;
#X obj 2472 109 r h_led1;
#X obj 2472 131 r h_led2;
#X obj 2472 153 r h_led3;
#X obj 2472 175 r h_led4;
#X obj 2153 197 r check_kick;
#X obj 2254 198 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2352 245 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2251 244 r check_snare;
#X obj 2448 198 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2546 245 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2347 197 r check_tom;
#X obj 2445 244 r check_hat;
#X symbolatom 2326 343 10 0 0 0 - - -;
#X msg 2254 221 symbol KICK!;
#X msg 2352 268 symbol SNARE!;
#X msg 2448 221 symbol TOM!;
#X msg 2546 268 symbol HAT!;
#X obj 1127 166 switch;
#X obj 1063 76 sel 0;
#X obj 1063 108 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1063 128 s stop;
#X msg 837 144 0;
#N canvas 197 142 2560 1314 pin_control 1;
#X obj 557 64 loadbang;
#X msg 310 126 out 15;
#X msg 368 126 out 16;
#X msg 431 125 out 17;
#X msg 488 125 out 18;
#X msg 552 125 out 19;
#X msg 612 126 out 20;
#X msg 674 125 out 21;
#X msg 732 126 out 22;
#X obj 547 229 s bela_setDigital;
#X obj 231 576 dac~ 3 4 5 6;
#X obj 730 619 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 730 530 sel 1;
#X obj 928 616 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 928 530 sel 1;
#X obj 1114 618 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1114 531 sel 1;
#X obj 1327 616 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1327 530 sel 1;
#X obj 299 994 r bela_digitalOut15;
#X floatatom 331 1056 5 0 0 0 - - -;
#X floatatom 482 1058 5 0 0 0 - - -;
#X floatatom 641 1057 5 0 0 0 - - -;
#X floatatom 792 1059 5 0 0 0 - - -;
#X obj 450 995 r bela_digitalOut16;
#X obj 609 995 r bela_digitalOut17;
#X obj 760 997 r bela_digitalOut18;
#X floatatom 730 658 5 0 0 0 - - -;
#X floatatom 928 655 5 0 0 0 - - -;
#X floatatom 1114 655 5 0 0 0 - - -;
#X floatatom 1327 652 5 0 0 0 - - -;
#X msg 668 636 119;
#X obj 642 501 loadbang;
#X obj 642 536 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 876 630 101;
#X msg 1061 634 115;
#X msg 1282 633 100;
#X obj 908 730 s key_press;
#X floatatom 342 1157 5 0 0 0 - - -;
#X floatatom 493 1159 5 0 0 0 - - -;
#X floatatom 652 1158 5 0 0 0 - - -;
#X floatatom 803 1160 5 0 0 0 - - -;
#X floatatom 941 1059 5 0 0 0 - - -;
#X floatatom 1092 1061 5 0 0 0 - - -;
#X floatatom 1251 1060 5 0 0 0 - - -;
#X floatatom 1402 1062 5 0 0 0 - - -;
#X obj 445 800 r led_list_dig;
#X obj 168 486 r led_list_ana;
#X floatatom 174 612 5 0 0 0 - - -;
#X floatatom 224 611 5 0 0 0 - - -;
#X floatatom 271 614 5 0 0 0 - - -;
#X floatatom 321 613 5 0 0 0 - - -;
#X obj 445 858 unpack float float float float float float float float
float float float float;
#X obj 170 533 unpack float float float float;
#X obj 310 1095 r bela_digitalOut11;
#X obj 459 1096 r bela_digitalOut12;
#X obj 620 1099 r bela_digitalOut13;
#X obj 771 1096 r bela_digitalOut14;
#X obj 36 934 s bela_digitalOut11;
#X obj 184 932 s bela_digitalOut12;
#X obj 326 932 s bela_digitalOut13;
#X obj 476 931 s bela_digitalOut14;
#X obj 616 929 s bela_digitalOut15;
#X obj 764 928 s bela_digitalOut16;
#X obj 908 929 s bela_digitalOut17;
#X obj 1055 930 s bela_digitalOut18;
#X obj 1201 928 s bela_digitalOut19;
#X obj 1349 929 s bela_digitalOut20;
#X obj 1493 925 s bela_digitalOut21;
#X obj 1641 926 s bela_digitalOut22;
#X obj 1060 997 r bela_digitalOut20;
#X obj 1219 998 r bela_digitalOut21;
#X obj 1370 1000 r bela_digitalOut22;
#X obj 1295 338 r bela_digitalIn26;
#X obj 1082 337 r bela_digitalIn25;
#X obj 896 333 r bela_digitalIn24;
#X obj 698 334 r bela_digitalIn23;
#X msg 66 128 out 11;
#X msg 127 128 out 12;
#X msg 190 127 out 13;
#X msg 248 127 out 14;
#X msg 969 123 in 26;
#X msg 915 123 in 25;
#X msg 852 124 in 24;
#X msg 795 124 in 23;
#X obj 910 997 r bela_digitalOut19;
#X obj 805 422 delay 3;
#X obj 698 390 t b f;
#X msg 775 460 0;
#X msg 805 459 1;
#X obj 730 487 spigot 1;
#X obj 1003 423 delay 3;
#X obj 896 391 t b f;
#X msg 973 461 0;
#X msg 1003 460 1;
#X obj 928 488 spigot 1;
#X obj 1189 425 delay 3;
#X obj 1082 393 t b f;
#X msg 1159 463 0;
#X msg 1189 462 1;
#X obj 1114 490 spigot 1;
#X obj 1402 430 delay 3;
#X obj 1295 398 t b f;
#X msg 1372 468 0;
#X msg 1402 467 1;
#X obj 1327 495 spigot 1;
#X text 1121 153 set all digital pins but the last 4 as outputs. set
the last 4 as inputs.;
#X text 263 422 receive and output the values for analog output to
control the last set of LEDs;
#X text 1025 831 receive and output the values for digital output to
control the first three sets of LEDs;
#X text 1513 327 receive the state of the buttons;
#X text 1533 445 debounce the buttons;
#X text 1525 614 convert the bang from a button press into a number
corresponding to the w \, e \, s \, & d keys. send those numbers to
the rhythm patch \, where they will activate drums.;
#X connect 0 0 77 0;
#X connect 0 0 78 0;
#X connect 0 0 79 0;
#X connect 0 0 80 0;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 0 0 4 0;
#X connect 0 0 5 0;
#X connect 0 0 6 0;
#X connect 0 0 7 0;
#X connect 0 0 8 0;
#X connect 0 0 84 0;
#X connect 0 0 83 0;
#X connect 0 0 82 0;
#X connect 0 0 81 0;
#X connect 1 0 9 0;
#X connect 2 0 9 0;
#X connect 3 0 9 0;
#X connect 4 0 9 0;
#X connect 5 0 9 0;
#X connect 6 0 9 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 11 0 27 0;
#X connect 12 0 11 0;
#X connect 13 0 28 0;
#X connect 14 0 13 0;
#X connect 15 0 29 0;
#X connect 16 0 15 0;
#X connect 17 0 30 0;
#X connect 18 0 17 0;
#X connect 19 0 20 0;
#X connect 24 0 21 0;
#X connect 25 0 22 0;
#X connect 26 0 23 0;
#X connect 27 0 37 0;
#X connect 28 0 37 0;
#X connect 29 0 37 0;
#X connect 30 0 37 0;
#X connect 31 0 27 0;
#X connect 32 0 33 0;
#X connect 33 0 31 0;
#X connect 33 0 34 0;
#X connect 33 0 35 0;
#X connect 33 0 36 0;
#X connect 34 0 28 0;
#X connect 35 0 29 0;
#X connect 36 0 30 0;
#X connect 46 0 52 0;
#X connect 47 0 53 0;
#X connect 52 0 58 0;
#X connect 52 1 59 0;
#X connect 52 2 60 0;
#X connect 52 3 61 0;
#X connect 52 4 62 0;
#X connect 52 5 63 0;
#X connect 52 6 64 0;
#X connect 52 7 65 0;
#X connect 52 8 66 0;
#X connect 52 9 67 0;
#X connect 52 10 68 0;
#X connect 52 11 69 0;
#X connect 53 0 10 0;
#X connect 53 0 48 0;
#X connect 53 1 10 1;
#X connect 53 1 49 0;
#X connect 53 2 10 2;
#X connect 53 2 50 0;
#X connect 53 3 10 3;
#X connect 53 3 51 0;
#X connect 54 0 38 0;
#X connect 55 0 39 0;
#X connect 56 0 40 0;
#X connect 57 0 41 0;
#X connect 70 0 43 0;
#X connect 71 0 44 0;
#X connect 72 0 45 0;
#X connect 73 0 102 0;
#X connect 74 0 97 0;
#X connect 75 0 92 0;
#X connect 76 0 87 0;
#X connect 77 0 9 0;
#X connect 78 0 9 0;
#X connect 79 0 9 0;
#X connect 80 0 9 0;
#X connect 81 0 9 0;
#X connect 82 0 9 0;
#X connect 83 0 9 0;
#X connect 84 0 9 0;
#X connect 85 0 42 0;
#X connect 86 0 89 0;
#X connect 87 0 88 0;
#X connect 87 0 86 0;
#X connect 87 1 90 0;
#X connect 88 0 90 1;
#X connect 89 0 90 1;
#X connect 90 0 12 0;
#X connect 91 0 94 0;
#X connect 92 0 93 0;
#X connect 92 0 91 0;
#X connect 92 1 95 0;
#X connect 93 0 95 1;
#X connect 94 0 95 1;
#X connect 95 0 14 0;
#X connect 96 0 99 0;
#X connect 97 0 98 0;
#X connect 97 0 96 0;
#X connect 97 1 100 0;
#X connect 98 0 100 1;
#X connect 99 0 100 1;
#X connect 100 0 16 0;
#X connect 101 0 104 0;
#X connect 102 0 103 0;
#X connect 102 0 101 0;
#X connect 102 1 105 0;
#X connect 103 0 105 1;
#X connect 104 0 105 1;
#X connect 105 0 18 0;
#X restore 59 62 pd pin_control;
#X msg 4273 1679 3;
#X obj 4157 1734 *~ 3;
#X msg 3511 1514 0.5;
#X obj 3486 1569 *~ 0.5;
#X obj 4343 1550 *~ 0.8;
#X msg 4367 1495 0.8;
#X obj 3905 1560 *~ 1;
#X msg 3930 1505 1;
#X msg 3864 1949 0.5;
#N canvas 597 167 1297 928 led_control 0;
#X text 122 172 red: 1 0 0, f 5;
#X obj 340 1883 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 120 213 orange: 1 0.45 0, f 8;
#X text 127 263 yellow: 1 0.5 0, f 8;
#X text 128 319 green: 0 0.8 0, f 6;
#X obj 247 402 +;
#X obj 318 453 +;
#X obj 336 401 f;
#X obj 389 500 +;
#X obj 407 455 f;
#X obj 460 540 +;
#X obj 478 501 f;
#X obj 265 372 t f b b b b b b b b f, f 92;
#X obj 531 584 +;
#X obj 549 541 f;
#X obj 603 631 +;
#X obj 621 586 f;
#X obj 674 674 +;
#X obj 692 632 f;
#X obj 746 716 +;
#X obj 763 675 f;
#X obj 816 759 +;
#X obj 834 716 f;
#X obj 1361 25 / 10;
#X obj 264 211 inlet;
#X obj 266 253 sel 1 -1;
#X msg 248 296 1;
#X msg 286 297 0;
#X floatatom 268 341 5 0 0 0 - - -;
#X obj 352 210 loadbang;
#X obj 1059 83 <= 0.25;
#X obj 1302 73 <= 0.5;
#X obj 1487 73 <= 0.75;
#X obj 1252 144 &&;
#X obj 1284 113 t b f;
#X obj 1447 147 &&;
#X obj 1479 116 t b f;
#X floatatom 965 54 5 0 0 0 - - -;
#X obj 1105 185 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1067 206 spigot;
#X obj 1270 178 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 1232 199 spigot;
#X obj 1470 176 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 1432 197 spigot;
#X obj 1696 194 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 1658 215 spigot;
#X obj 1647 90 > 0.75;
#X obj 1440 71 > 0.5;
#X obj 1248 72 > 0.25;
#X obj 1430 231 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1523 288 r 4_off;
#X obj 1380 286 r 2_off;
#X obj 1483 264 s 3_off;
#X obj 396 265 t b b b b b b b b b b b;
#X obj 814 804 spigot;
#X obj 875 763 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 925 910 delay 5;
#X obj 1392 397 spigot;
#X obj 1456 397 spigot;
#X obj 1421 369 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1486 369 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X msg 1509 325 0;
#X msg 1475 324 1;
#X msg 1436 323 0;
#X msg 1402 322 1;
#X floatatom 1406 348 5 0 0 0 - - -;
#X floatatom 1484 348 5 0 0 0 - - -;
#X obj 1384 468 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1475 468 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1665 248 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1650 409 spigot;
#X obj 1679 381 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X msg 1694 335 0;
#X msg 1660 334 1;
#X floatatom 1664 360 5 0 0 0 - - -;
#X obj 1705 482 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1718 281 s 4_off;
#X obj 1232 230 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1194 396 spigot;
#X obj 1258 396 spigot;
#X obj 1223 368 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 1288 368 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X msg 1311 324 0;
#X msg 1277 323 1;
#X msg 1238 322 0;
#X msg 1204 321 1;
#X floatatom 1208 347 5 0 0 0 - - -;
#X floatatom 1286 347 5 0 0 0 - - -;
#X obj 1186 467 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1277 467 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1056 238 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1030 293 r 2_off;
#X obj 1042 404 spigot;
#X obj 1071 376 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X msg 1086 330 0;
#X msg 1052 329 1;
#X floatatom 1056 355 5 0 0 0 - - -;
#X obj 1034 475 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1109 271 s 1_off;
#X obj 1285 263 s 2_off;
#X obj 1636 298 r 3_off;
#X obj 1182 285 r 1_off;
#X obj 1325 287 r 3_off;
#X msg 1141 521 green +0.45;
#X msg 1506 543 red +1;
#X msg 1502 519 green -0.3;
#X msg 1366 521 green +0.05;
#X msg 1260 524 green -0.05;
#X msg 1762 541 red -1;
#X msg 1757 509 green +.3;
#X msg 1040 518 green -0.45;
#X obj 1155 620 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X floatatom 1172 598 5 0 0 0 - - -;
#X msg 1160 571 1;
#X msg 1200 572 0;
#X msg 1149 695 1;
#X obj 1150 723 +;
#X msg 1206 686 0;
#X obj 1206 711 f;
#X floatatom 1148 747 5 0 0 0 - - -;
#X obj 1168 782 sel 25;
#X floatatom 1148 872 5 0 0 0 - - -;
#X obj 1139 814 expr $f1 * 0.04 * 0.45, f 13;
#X obj 1157 648 metro 25;
#X obj 1027 620 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X floatatom 1044 598 5 0 0 0 - - -;
#X msg 1032 571 1;
#X msg 1072 572 0;
#X msg 1021 695 1;
#X obj 1022 723 +;
#X msg 1078 686 0;
#X obj 1078 711 f;
#X floatatom 1020 747 5 0 0 0 - - -;
#X obj 1040 782 sel 25;
#X floatatom 1020 872 5 0 0 0 - - -;
#X obj 1029 648 metro 25;
#X obj 1022 808 expr 0.45 - ($f1 * 0.04 *.45), f 12;
#X obj 1279 621 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X floatatom 1296 599 5 0 0 0 - - -;
#X msg 1284 572 1;
#X msg 1324 573 0;
#X msg 1273 696 1;
#X obj 1274 724 +;
#X msg 1330 687 0;
#X obj 1330 712 f;
#X floatatom 1272 748 5 0 0 0 - - -;
#X obj 1292 783 sel 25;
#X floatatom 1272 873 5 0 0 0 - - -;
#X obj 1281 649 metro 25;
#X obj 1385 618 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X floatatom 1402 596 5 0 0 0 - - -;
#X msg 1390 569 1;
#X msg 1430 570 0;
#X msg 1379 693 1;
#X obj 1380 721 +;
#X msg 1436 684 0;
#X obj 1436 709 f;
#X floatatom 1378 745 5 0 0 0 - - -;
#X obj 1398 780 sel 25;
#X floatatom 1378 870 5 0 0 0 - - -;
#X obj 1387 646 metro 25;
#X obj 1487 617 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X floatatom 1504 595 5 0 0 0 - - -;
#X msg 1492 568 1;
#X msg 1532 569 0;
#X msg 1481 692 1;
#X obj 1482 720 +;
#X msg 1538 683 0;
#X obj 1538 708 f;
#X floatatom 1480 744 5 0 0 0 - - -;
#X obj 1500 779 sel 25;
#X floatatom 1480 869 5 0 0 0 - - -;
#X obj 1489 645 metro 25;
#X floatatom 1577 866 5 0 0 0 - - -;
#X obj 1577 801 expr $f1 * 0.04, f 12;
#X obj 1696 615 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X floatatom 1713 593 5 0 0 0 - - -;
#X msg 1701 566 1;
#X msg 1741 567 0;
#X msg 1690 690 1;
#X obj 1691 718 +;
#X msg 1747 681 0;
#X obj 1747 706 f;
#X floatatom 1689 742 5 0 0 0 - - -;
#X obj 1709 777 sel 25;
#X floatatom 1689 867 5 0 0 0 - - -;
#X obj 1698 643 metro 25;
#X floatatom 1786 864 5 0 0 0 - - -;
#X obj 1779 803 expr 1 - ($f1 * .04), f 9;
#X obj 2257 239 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1656 273 t b b;
#X obj 1047 267 t b b;
#X obj 1205 258 t b b b b;
#X obj 1407 263 t b b b b;
#X obj 1261 1085 dac~ 7 8 9;
#X floatatom 1204 999 5 0 0 0 - - -;
#X floatatom 1300 1004 5 0 0 0 - - -;
#X floatatom 1425 999 5 0 0 0 - - -;
#X obj 1691 803 expr ($f1 * 0.04 * 0.3) + 0.5, f 9;
#X obj 1482 805 expr 0.8 - ($f1 * 0.04 *.3), f 12;
#X obj 1380 806 expr ($f1 * 0.04 * 0.05) + 0.45, f 12;
#X obj 1274 809 expr 0.5 - ($f1 * 0.04 *.05), f 12;
#X obj 1490 233 loadbang;
#X msg 962 962 0.8;
#X obj 1758 327 loadbang;
#X text 248 797 first \, a moving average of 10 numbers is calculated
;
#X text 1768 73 second \, check in which quarter of 1 exists the average
;
#X text 1840 264 third \, determine if the LED should move toward or
away from green. this is found by which LED was lit last.;
#X text 1825 593 finally \, start a counter from 0 to 25 with a 25
ms interval. then map this range to whatever are the necessary starting
and ending values for the lights in the RGB LED.;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 7 0 6 1;
#X connect 7 0 9 1;
#X connect 8 0 10 0;
#X connect 9 0 8 1;
#X connect 9 0 11 1;
#X connect 10 0 13 0;
#X connect 11 0 10 1;
#X connect 11 0 14 1;
#X connect 12 0 5 1;
#X connect 12 0 7 1;
#X connect 12 1 7 0;
#X connect 12 2 9 0;
#X connect 12 3 11 0;
#X connect 12 4 14 0;
#X connect 12 5 16 0;
#X connect 12 6 18 0;
#X connect 12 7 20 0;
#X connect 12 8 22 0;
#X connect 12 9 5 0;
#X connect 13 0 15 0;
#X connect 14 0 13 1;
#X connect 14 0 16 1;
#X connect 15 0 17 0;
#X connect 16 0 15 1;
#X connect 16 0 18 1;
#X connect 17 0 19 0;
#X connect 18 0 17 1;
#X connect 18 0 20 1;
#X connect 19 0 21 0;
#X connect 20 0 19 1;
#X connect 20 0 22 1;
#X connect 21 0 54 0;
#X connect 22 0 21 1;
#X connect 23 0 32 0;
#X connect 23 0 31 0;
#X connect 23 0 30 0;
#X connect 23 0 37 0;
#X connect 23 0 46 0;
#X connect 23 0 47 0;
#X connect 23 0 48 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 25 1 27 0;
#X connect 26 0 28 0;
#X connect 27 0 28 0;
#X connect 28 0 12 0;
#X connect 29 0 53 0;
#X connect 30 0 38 0;
#X connect 30 0 39 0;
#X connect 31 0 34 0;
#X connect 32 0 36 0;
#X connect 33 0 40 0;
#X connect 34 0 33 0;
#X connect 34 1 33 1;
#X connect 35 0 42 0;
#X connect 36 0 35 0;
#X connect 36 1 35 1;
#X connect 38 0 39 1;
#X connect 39 0 90 0;
#X connect 40 0 41 1;
#X connect 41 0 77 0;
#X connect 42 0 43 1;
#X connect 43 0 49 0;
#X connect 44 0 45 1;
#X connect 45 0 69 0;
#X connect 46 0 44 0;
#X connect 46 0 45 0;
#X connect 47 0 35 0;
#X connect 47 0 43 0;
#X connect 48 0 33 0;
#X connect 48 0 41 0;
#X connect 49 0 52 0;
#X connect 49 0 193 0;
#X connect 50 0 62 0;
#X connect 51 0 64 0;
#X connect 53 0 55 0;
#X connect 53 0 56 0;
#X connect 53 1 26 0;
#X connect 53 2 26 0;
#X connect 53 3 26 0;
#X connect 53 4 26 0;
#X connect 53 5 26 0;
#X connect 53 6 26 0;
#X connect 53 7 26 0;
#X connect 53 8 26 0;
#X connect 53 9 26 0;
#X connect 53 10 26 0;
#X connect 54 0 23 0;
#X connect 55 0 54 1;
#X connect 56 0 203 0;
#X connect 57 0 67 0;
#X connect 58 0 68 0;
#X connect 59 0 57 1;
#X connect 60 0 58 1;
#X connect 61 0 66 0;
#X connect 62 0 66 0;
#X connect 63 0 65 0;
#X connect 64 0 65 0;
#X connect 65 0 59 0;
#X connect 66 0 60 0;
#X connect 67 0 151 0;
#X connect 68 0 163 0;
#X connect 69 0 76 0;
#X connect 69 0 190 0;
#X connect 70 0 75 0;
#X connect 71 0 70 1;
#X connect 72 0 74 0;
#X connect 73 0 74 0;
#X connect 74 0 71 0;
#X connect 75 0 177 0;
#X connect 77 0 99 0;
#X connect 77 0 192 0;
#X connect 78 0 88 0;
#X connect 79 0 89 0;
#X connect 80 0 78 1;
#X connect 81 0 79 1;
#X connect 82 0 87 0;
#X connect 83 0 87 0;
#X connect 84 0 86 0;
#X connect 85 0 86 0;
#X connect 86 0 80 0;
#X connect 87 0 81 0;
#X connect 88 0 113 0;
#X connect 89 0 139 0;
#X connect 90 0 98 0;
#X connect 90 0 191 0;
#X connect 91 0 95 0;
#X connect 92 0 97 0;
#X connect 93 0 92 1;
#X connect 94 0 96 0;
#X connect 95 0 96 0;
#X connect 96 0 93 0;
#X connect 97 0 126 0;
#X connect 100 0 73 0;
#X connect 101 0 85 0;
#X connect 102 0 83 0;
#X connect 111 0 123 0;
#X connect 112 0 111 0;
#X connect 113 0 112 0;
#X connect 114 0 112 0;
#X connect 115 0 116 0;
#X connect 116 0 118 0;
#X connect 116 0 119 0;
#X connect 117 0 118 0;
#X connect 118 0 116 1;
#X connect 119 0 120 0;
#X connect 119 0 122 0;
#X connect 120 0 117 0;
#X connect 120 0 114 0;
#X connect 121 0 196 0;
#X connect 122 0 121 0;
#X connect 123 0 115 0;
#X connect 124 0 135 0;
#X connect 125 0 124 0;
#X connect 126 0 125 0;
#X connect 127 0 125 0;
#X connect 128 0 129 0;
#X connect 129 0 131 0;
#X connect 129 0 132 0;
#X connect 130 0 131 0;
#X connect 131 0 129 1;
#X connect 132 0 133 0;
#X connect 132 0 136 0;
#X connect 133 0 130 0;
#X connect 133 0 127 0;
#X connect 134 0 196 0;
#X connect 135 0 128 0;
#X connect 136 0 134 0;
#X connect 137 0 148 0;
#X connect 138 0 137 0;
#X connect 139 0 138 0;
#X connect 140 0 138 0;
#X connect 141 0 142 0;
#X connect 142 0 144 0;
#X connect 142 0 145 0;
#X connect 143 0 144 0;
#X connect 144 0 142 1;
#X connect 145 0 146 0;
#X connect 145 0 201 0;
#X connect 146 0 143 0;
#X connect 146 0 140 0;
#X connect 147 0 196 0;
#X connect 148 0 141 0;
#X connect 149 0 160 0;
#X connect 150 0 149 0;
#X connect 151 0 150 0;
#X connect 152 0 150 0;
#X connect 153 0 154 0;
#X connect 154 0 156 0;
#X connect 154 0 157 0;
#X connect 155 0 156 0;
#X connect 156 0 154 1;
#X connect 157 0 158 0;
#X connect 157 0 200 0;
#X connect 158 0 155 0;
#X connect 158 0 152 0;
#X connect 159 0 196 0;
#X connect 160 0 153 0;
#X connect 161 0 172 0;
#X connect 162 0 161 0;
#X connect 163 0 162 0;
#X connect 164 0 162 0;
#X connect 165 0 166 0;
#X connect 166 0 168 0;
#X connect 166 0 169 0;
#X connect 167 0 168 0;
#X connect 168 0 166 1;
#X connect 169 0 170 0;
#X connect 169 0 174 0;
#X connect 169 0 199 0;
#X connect 170 0 167 0;
#X connect 170 0 164 0;
#X connect 171 0 196 0;
#X connect 172 0 165 0;
#X connect 173 0 195 0;
#X connect 174 0 173 0;
#X connect 175 0 186 0;
#X connect 176 0 175 0;
#X connect 177 0 176 0;
#X connect 178 0 176 0;
#X connect 179 0 180 0;
#X connect 180 0 182 0;
#X connect 180 0 183 0;
#X connect 181 0 182 0;
#X connect 182 0 180 1;
#X connect 183 0 184 0;
#X connect 183 0 188 0;
#X connect 183 0 198 0;
#X connect 184 0 181 0;
#X connect 184 0 178 0;
#X connect 185 0 196 0;
#X connect 186 0 179 0;
#X connect 187 0 195 0;
#X connect 188 0 187 0;
#X connect 190 0 72 0;
#X connect 190 1 70 0;
#X connect 191 0 94 0;
#X connect 191 1 92 0;
#X connect 192 0 84 0;
#X connect 192 1 82 0;
#X connect 192 2 78 0;
#X connect 192 3 79 0;
#X connect 193 0 63 0;
#X connect 193 1 61 0;
#X connect 193 2 57 0;
#X connect 193 3 58 0;
#X connect 195 0 194 0;
#X connect 196 0 194 1;
#X connect 197 0 194 2;
#X connect 198 0 185 0;
#X connect 199 0 171 0;
#X connect 200 0 159 0;
#X connect 201 0 147 0;
#X connect 202 0 52 0;
#X connect 203 0 196 0;
#X connect 204 0 72 0;
#X restore 2030 154 pd led_control;
#X obj 1128 198 s go;
#X obj 1069 166 sel 55;
#N canvas 602 238 693 610 key_changer 0;
#X obj 985 1275 outlet;
#X obj 1010 49 inlet;
#X floatatom 985 1222 5 0 0 0 - - -;
#X floatatom 1010 153 5 0 0 0 - - -;
#X text 1056 153 < index of current key root;
#X obj 336 523 expr if ($f1 + $f2 >= 0 && $f1 + $f2 < 12 \, $f1 \,
0);
#X obj 336 560 sel 0;
#X obj 985 1140 +, f 4;
#X obj 267 894 random 10;
#X obj 562 1014 list store;
#X msg 562 940 prepend \$1;
#X msg 168 411 -5;
#X msg 206 411 -4;
#X msg 244 411 -3;
#X msg 282 411 -2;
#X msg 320 411 -1;
#X msg 358 411 1;
#X msg 396 411 2;
#X msg 434 411 3;
#X msg 475 410 4;
#X msg 513 410 5;
#X obj 106 346 t b b b, f 73;
#X msg 267 930 get \$1 1;
#X obj 368 635 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 344 711 + 1;
#X obj 278 818 f;
#X obj 296 700 f 1;
#X msg 314 641 1;
#X msg 306 785 0;
#X obj 614 397 s choosing_new_key;
#X obj 629 982 r choosing_new_key;
#X obj 306 754 r choosing_new_key;
#X obj 220 598 r choosing_new_key;
#X obj 278 858 t b f;
#X text 650 1014 when we are choosing a new key \, clear the old list
of potential keys to prepare for a new list, f 48;
#X text 1038 1221 < index of new key;
#X obj 154 193 + 1;
#X obj 106 310 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 106 275 sel 0;
#X obj 106 120 r whole_note;
#X obj 106 238 % 8;
#X obj 106 181 f -7;
#X text 202 178 change key every 8 measures (starting counter at -7
so that it hits 0 after first 8 measures), f 35;
#X text 472 457 potential new key can be 1-5 semitones away \, up or
down \, but not out of bounds of our 12 possible key roots, f 28;
#X text 361 875 choose randomly from the keys that are close enough
to the current one \, and in bounds, f 18;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 3 0 7 1;
#X connect 3 0 5 1;
#X connect 5 0 6 0;
#X connect 6 1 10 0;
#X connect 6 1 23 0;
#X connect 7 0 2 0;
#X connect 8 0 22 0;
#X connect 9 0 7 0;
#X connect 10 0 9 0;
#X connect 11 0 5 0;
#X connect 12 0 5 0;
#X connect 13 0 5 0;
#X connect 14 0 5 0;
#X connect 15 0 5 0;
#X connect 16 0 5 0;
#X connect 17 0 5 0;
#X connect 18 0 5 0;
#X connect 19 0 5 0;
#X connect 20 0 5 0;
#X connect 21 0 25 0;
#X connect 21 1 11 0;
#X connect 21 1 12 0;
#X connect 21 1 13 0;
#X connect 21 1 14 0;
#X connect 21 1 15 0;
#X connect 21 1 16 0;
#X connect 21 1 17 0;
#X connect 21 1 18 0;
#X connect 21 1 19 0;
#X connect 21 1 20 0;
#X connect 21 2 29 0;
#X connect 22 0 9 0;
#X connect 23 0 26 0;
#X connect 24 0 26 1;
#X connect 25 0 33 0;
#X connect 26 0 24 0;
#X connect 26 0 25 1;
#X connect 27 0 26 1;
#X connect 28 0 25 1;
#X connect 30 0 9 1;
#X connect 31 0 28 0;
#X connect 32 0 27 0;
#X connect 33 0 8 0;
#X connect 33 1 8 1;
#X connect 36 0 41 1;
#X connect 37 0 21 0;
#X connect 38 0 37 0;
#X connect 39 0 41 0;
#X connect 40 0 38 0;
#X connect 41 0 36 0;
#X connect 41 0 40 0;
#X restore 1452 25 pd key_changer;
#X obj 781 102 metro 100;
#X obj 1546 57 loadbang;
#X obj 382 76 r heartrate;
#X obj 382 236 s sixty_fourth_note_duration;
#X obj 382 199 expr 60000 / ($f1 * 16);
#X obj 469 130 print BPM;
#X text 261 78 heartrate comes from C++ pulse detection, f 16;
#X obj 382 160 clip 30 150;
#X connect 0 0 232 0;
#X connect 1 0 213 0;
#X connect 1 0 218 0;
#X connect 1 0 187 0;
#X connect 1 0 188 0;
#X connect 1 0 189 0;
#X connect 1 0 190 0;
#X connect 1 0 209 0;
#X connect 2 0 16 0;
#X connect 2 0 310 0;
#X connect 15 0 27 0;
#X connect 16 0 15 0;
#X connect 17 0 19 0;
#X connect 18 0 54 0;
#X connect 19 0 16 1;
#X connect 19 0 28 0;
#X connect 21 0 39 0;
#X connect 22 0 39 0;
#X connect 23 0 39 0;
#X connect 24 0 39 0;
#X connect 25 0 39 0;
#X connect 28 0 16 0;
#X connect 29 0 22 1;
#X connect 30 0 23 1;
#X connect 31 0 24 1;
#X connect 32 0 25 1;
#X connect 33 0 39 0;
#X connect 34 0 39 0;
#X connect 35 0 33 1;
#X connect 36 0 34 1;
#X connect 37 0 21 0;
#X connect 37 1 22 0;
#X connect 37 2 23 0;
#X connect 37 3 24 0;
#X connect 37 4 25 0;
#X connect 37 5 33 0;
#X connect 37 6 34 0;
#X connect 38 0 21 0;
#X connect 38 0 29 0;
#X connect 38 0 30 0;
#X connect 38 0 31 0;
#X connect 38 0 32 0;
#X connect 38 0 35 0;
#X connect 38 0 36 0;
#X connect 39 0 75 0;
#X connect 41 0 37 0;
#X connect 42 0 58 0;
#X connect 43 0 70 1;
#X connect 44 0 306 0;
#X connect 45 0 50 0;
#X connect 46 0 50 0;
#X connect 47 0 50 0;
#X connect 48 0 57 0;
#X connect 48 0 55 0;
#X connect 48 0 56 0;
#X connect 49 0 159 0;
#X connect 50 0 49 0;
#X connect 50 0 71 0;
#X connect 51 0 52 0;
#X connect 52 0 53 0;
#X connect 53 0 45 0;
#X connect 53 1 46 0;
#X connect 53 2 47 0;
#X connect 54 0 17 0;
#X connect 55 0 45 0;
#X connect 56 0 46 1;
#X connect 57 0 47 1;
#X connect 58 0 61 0;
#X connect 59 0 65 0;
#X connect 60 0 63 0;
#X connect 61 0 59 0;
#X connect 61 1 62 0;
#X connect 62 0 41 0;
#X connect 62 0 66 0;
#X connect 63 0 64 0;
#X connect 63 0 76 0;
#X connect 64 0 201 0;
#X connect 65 0 60 0;
#X connect 65 1 200 0;
#X connect 66 0 60 1;
#X connect 70 0 40 0;
#X connect 70 0 40 1;
#X connect 70 0 135 0;
#X connect 71 0 159 0;
#X connect 72 0 71 1;
#X connect 73 0 74 0;
#X connect 74 0 72 0;
#X connect 75 0 224 0;
#X connect 77 0 75 1;
#X connect 80 0 92 1;
#X connect 81 0 84 0;
#X connect 82 0 207 1;
#X connect 83 0 206 0;
#X connect 84 0 116 0;
#X connect 88 0 114 0;
#X connect 89 0 90 0;
#X connect 89 0 102 0;
#X connect 89 0 220 0;
#X connect 90 0 101 0;
#X connect 91 0 92 0;
#X connect 92 0 81 0;
#X connect 93 0 92 0;
#X connect 94 0 92 0;
#X connect 95 0 92 0;
#X connect 96 0 92 0;
#X connect 97 0 92 0;
#X connect 98 0 92 0;
#X connect 99 0 92 0;
#X connect 100 0 92 0;
#X connect 101 0 89 1;
#X connect 102 0 91 0;
#X connect 102 1 94 0;
#X connect 102 2 95 0;
#X connect 102 3 96 0;
#X connect 102 4 97 0;
#X connect 102 5 98 0;
#X connect 102 6 99 0;
#X connect 102 7 100 0;
#X connect 102 8 93 0;
#X connect 104 0 147 0;
#X connect 105 0 159 1;
#X connect 107 0 225 0;
#X connect 108 0 224 1;
#X connect 113 0 86 0;
#X connect 114 0 87 0;
#X connect 115 0 116 1;
#X connect 116 0 207 0;
#X connect 117 0 115 0;
#X connect 119 0 136 0;
#X connect 122 0 137 0;
#X connect 125 0 138 0;
#X connect 128 0 139 0;
#X connect 130 0 160 0;
#X connect 131 0 301 0;
#X connect 132 0 304 0;
#X connect 133 0 302 0;
#X connect 135 0 134 0;
#X connect 136 0 118 0;
#X connect 137 0 121 0;
#X connect 138 0 124 0;
#X connect 139 0 127 0;
#X connect 140 0 130 0;
#X connect 141 0 131 0;
#X connect 142 0 132 0;
#X connect 143 0 133 0;
#X connect 145 0 160 1;
#X connect 146 0 158 0;
#X connect 147 0 105 0;
#X connect 148 0 301 1;
#X connect 149 0 300 0;
#X connect 150 0 304 1;
#X connect 151 0 305 0;
#X connect 152 0 302 1;
#X connect 153 0 303 0;
#X connect 158 0 145 0;
#X connect 159 0 70 0;
#X connect 160 0 299 0;
#X connect 161 0 299 1;
#X connect 162 0 298 0;
#X connect 164 0 168 0;
#X connect 164 1 169 0;
#X connect 164 2 170 0;
#X connect 164 3 171 0;
#X connect 164 4 172 0;
#X connect 164 5 173 0;
#X connect 165 0 164 0;
#X connect 166 0 165 0;
#X connect 168 0 176 0;
#X connect 169 0 176 0;
#X connect 170 0 176 0;
#X connect 171 0 176 0;
#X connect 172 0 176 0;
#X connect 173 0 176 0;
#X connect 174 0 176 1;
#X connect 175 0 177 0;
#X connect 176 0 175 0;
#X connect 177 0 214 0;
#X connect 178 0 212 1;
#X connect 179 0 226 0;
#X connect 182 0 186 0;
#X connect 183 0 191 0;
#X connect 184 0 192 0;
#X connect 185 0 193 0;
#X connect 187 0 182 0;
#X connect 188 0 183 0;
#X connect 189 0 184 0;
#X connect 190 0 185 0;
#X connect 194 0 195 0;
#X connect 195 0 196 0;
#X connect 196 0 1 0;
#X connect 196 0 195 1;
#X connect 196 0 309 0;
#X connect 197 0 42 0;
#X connect 199 0 58 1;
#X connect 202 0 51 0;
#X connect 203 0 89 0;
#X connect 204 0 117 0;
#X connect 206 0 82 0;
#X connect 207 0 70 0;
#X connect 208 0 210 0;
#X connect 209 0 208 0;
#X connect 211 0 165 0;
#X connect 212 0 70 0;
#X connect 214 0 229 0;
#X connect 215 0 222 0;
#X connect 216 0 217 0;
#X connect 218 0 216 0;
#X connect 219 0 166 0;
#X connect 221 0 0 0;
#X connect 222 0 214 1;
#X connect 224 0 70 0;
#X connect 225 0 108 0;
#X connect 226 0 178 0;
#X connect 227 0 229 1;
#X connect 228 0 230 0;
#X connect 229 0 212 0;
#X connect 230 0 227 0;
#X connect 231 0 261 1;
#X connect 231 0 311 0;
#X connect 231 0 311 1;
#X connect 232 0 293 0;
#X connect 232 0 311 0;
#X connect 233 0 140 0;
#X connect 234 0 141 0;
#X connect 235 0 238 0;
#X connect 236 0 240 0;
#X connect 238 0 239 0;
#X connect 238 0 307 0;
#X connect 239 0 237 0;
#X connect 239 0 241 0;
#X connect 240 0 239 0;
#X connect 240 0 307 0;
#X connect 241 0 239 1;
#X connect 242 0 241 0;
#X connect 242 0 237 0;
#X connect 243 0 142 0;
#X connect 244 0 143 0;
#X connect 245 0 249 0;
#X connect 246 0 250 0;
#X connect 247 0 251 0;
#X connect 248 0 252 0;
#X connect 257 0 253 0;
#X connect 258 0 254 0;
#X connect 259 0 255 0;
#X connect 260 0 256 0;
#X connect 261 0 308 0;
#X connect 271 0 263 0;
#X connect 272 0 264 0;
#X connect 273 0 265 0;
#X connect 274 0 266 0;
#X connect 275 0 267 0;
#X connect 276 0 268 0;
#X connect 277 0 269 0;
#X connect 278 0 270 0;
#X connect 279 0 280 0;
#X connect 280 0 288 0;
#X connect 281 0 289 0;
#X connect 282 0 281 0;
#X connect 283 0 290 0;
#X connect 284 0 291 0;
#X connect 285 0 283 0;
#X connect 286 0 284 0;
#X connect 288 0 287 0;
#X connect 289 0 287 0;
#X connect 290 0 287 0;
#X connect 291 0 287 0;
#X connect 292 0 261 0;
#X connect 293 0 294 0;
#X connect 294 0 295 0;
#X connect 294 0 296 0;
#X connect 294 0 292 0;
#X connect 296 0 196 0;
#X connect 298 0 161 0;
#X connect 299 0 70 0;
#X connect 300 0 148 0;
#X connect 301 0 299 0;
#X connect 302 0 299 0;
#X connect 303 0 152 0;
#X connect 304 0 299 0;
#X connect 305 0 150 0;
#X connect 306 0 43 0;
#X connect 309 0 292 1;
#X connect 310 0 2 0;
#X connect 311 0 194 0;
#X connect 312 0 2 0;
#X connect 313 0 316 0;
#X connect 313 0 318 0;
#X connect 315 0 314 0;
#X connect 318 0 315 0;
